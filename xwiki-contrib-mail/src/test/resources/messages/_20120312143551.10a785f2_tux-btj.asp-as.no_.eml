Received: from smtp1.gemalto.com (193.56.114.194) by ABSHUBBWP01.gemalto.com
 (10.3.0.231) with Microsoft SMTP Server id 8.3.192.1; Mon, 12 Mar 2012
 14:36:05 +0100
Received: from mail.sonatype.org (mail.sonatype.org [207.223.241.82])	by
 smtp1.gemalto.com (envelope-from
 nexus-user-return-6771-Jeremie.BOUSQUET=gemalto.com@sonatype.org)
 (8.14.3/8.14.3) with ESMTP id q2CDYUcw011094	(version=TLSv1/SSLv3
 cipher=DHE-RSA-AES256-SHA bits=256 verify=NOT)	for
 <Jeremie.BOUSQUET@gemalto.com>; Mon, 12 Mar 2012 14:34:32 +0100
Received: (qmail 19080 invoked by uid 89); 12 Mar 2012 13:35:52 -0000
Received: (qmail 19074 invoked by uid 89); 12 Mar 2012 13:35:52 -0000
From: =?iso-8859-1?Q?Bj=F8rn_T_Johansen?= <btj@havleik.no>
To: "nexus-user@sonatype.org" <nexus-user@sonatype.org>
Date: Mon, 12 Mar 2012 14:35:51 +0100
Subject: Re: [nexus-user] Problem upgrading to 2.0.1 from 1.9.x:
 IllegalArgumentException: Prefix string too short
Thread-Topic: [nexus-user] Problem upgrading to 2.0.1 from 1.9.x:
 IllegalArgumentException: Prefix string too short
Thread-Index: Ac0AVRMxjN+nUI3iQEStNuHHeYCqEg==
Message-ID: <20120312143551.10a785f2@tux-btj.asp-as.no>
References: <20120312112853.698ed584@tux-btj.asp-as.no>
	<CAPLpRQ+raaieA3v5n1E3pPUKY07MsKFTMCqLRMrvD=vSW1vfzA@mail.gmail.com>
List-Help: <mailto:nexus-user-help@sonatype.org>
List-Subscribe: <mailto:nexus-user-subscribe@sonatype.org>
List-Unsubscribe: <mailto:nexus-user-unsubscribe@sonatype.org>
In-Reply-To:
 <CAPLpRQ+raaieA3v5n1E3pPUKY07MsKFTMCqLRMrvD=vSW1vfzA@mail.gmail.com>
Reply-To: "nexus-user@sonatype.org" <nexus-user@sonatype.org>
Accept-Language: fr-FR, en-US
Content-Language: fr-FR
X-MS-Exchange-Organization-AuthAs: Anonymous
X-MS-Exchange-Organization-AuthSource: ABSHUBBWP01.gemalto.com
X-MS-Has-Attach:
X-Auto-Response-Suppress: All
X-MS-TNEF-Correlator:
x-pm-nine: Xy1rY2FCZXJlaHdvTmduaW9HXC8zaW5pbWVHbW9yRmdub3J0U25PZ25pbW9DLV8K
x-spam-free: -8.838 ()
 BAYES_00,GEM_XTNDSET1,GEM_XTNDSET7,GEM_XTNDSET8,GEM_XTNDSET9,RPL_XTNDSET0,RPL_XTNDSET7,RPL_XTNDSET8,RPL_XTNDSET9,RP_BONK_01,RP_PONK_01,RP_PONK_02,SPF_PASS,X_AUTH_WARN_FAKED
x-scanned-by: MIMEDefang 2.70 on 193.56.114.194
delivered-to: mailing list nexus-user@sonatype.org
x-no-archive: yes
list-post: <mailto:nexus-user@sonatype.org>
received-spf: none (207-223-240-94.contegix.com: domain at havleik.no does
 not designate permitted sender hosts)
mailing-list: contact nexus-user-help@sonatype.org; run by ezmlm
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0

Thx.... Not sure how to find this file(s) though... But I will wait to upgr=
ade until this bug is fixed... :)

BTJ

On Mon, 12 Mar 2012 13:13:29 +0100
Tam=E1s Cserven=E1k <tamas@cservenak.net> wrote:

> Hi Bj=F8rn,
>=20
> the exception happens here:
> https://github.com/sonatype/nexus/blob/982f62b530768e490cf83c916d3aa2692d=
38ede2/nexus/nexus-proxy/src/main/java/org/sonatype/nexus/proxy/storage/loc=
al/fs/DefaultFSPeer.java#L316
>=20
> And while I really consider this a bug (target name is shorter than 3
> characters it seems), this raises a question. While truly, this is a
> bug as code "assumes" the file name will be not shorter than 3
> characters, it seems you do have some file in repository  "3rd party"
> [id=3Dthirdparty] that has name less then 3 characters. According to
> repository maven layout, this could never happen (either
> maven-metadata.xml or the artifact, but it is "G-A.ext", so the dash
> and dot and at least one char should be present for sure).
>=20
> Please find this file and simply delete it (if it is a wasteful one,
> at least it's sure it is not a maven artifact!). If you did find it
> but you cannot delete it, then this bug below is a blocker for you.
>=20
> I recorded an issue here
> https://issues.sonatype.org/browse/NEXUS-4955
>=20
>=20
> Thanks,
> ~t~
>=20
> 2012/3/12 Bj=F8rn T Johansen <btj@havleik.no>:
> > When I tried to uupgrade to Nexus 2.0.1 this weekend, I kept getting th=
e following error..:
> >
> >
> >
> > 2012-03-10 16:44:38 INFO =A0[ributesUpgrader] - org.sonatype.nexus.prox=
y.attributes.upgrade.AttributeUpgraderThread - Upgrading legacy attributes =
of repository "3rd party" [id=3Dthirdparty].
> > 2012-03-10 16:44:38 INFO =A0[ributesUpgrader] - org.sonatype.nexus.prox=
y.maven.maven2.M2Repository - Rebuilding item attributes in repository "3rd=
 party" [id=3Dthirdparty] from path=3D"/"
> > 2012-03-10 16:44:39 INFO =A0[ributesUpgrader] - org.sonatype.nexus.prox=
y.walker.DefaultWalker - Aborted walking on repository "3rd party" [id=3Dth=
irdparty] from path "/", cause: Prefix string too short
> > 2012-03-10 16:44:39 ERROR [ributesUpgrader] - org.sonatype.nexus.proxy.=
attributes.upgrade.AttributeUpgraderThread - Problems during legacy attribu=
te upgrade of repository "3rd party" [id=3Dthirdparty], skipping it. Please=
 fix the problems and retry the upgrade.
> > org.sonatype.nexus.proxy.walker.WalkerException: Aborted walking on rep=
ository ID=3D'thirdparty' from path=3D'/'.
> > =A0 =A0 =A0 =A0at org.sonatype.nexus.proxy.walker.DefaultWalker.reportW=
alkEnd(DefaultWalker.java:167) ~[nexus-proxy-2.0.1.jar:na]
> > =A0 =A0 =A0 =A0at org.sonatype.nexus.proxy.walker.DefaultWalker.walk(De=
faultWalker.java:126) ~[nexus-proxy-2.0.1.jar:na]
> > =A0 =A0 =A0 =A0at org.sonatype.nexus.proxy.repository.AbstractRepositor=
y.recreateAttributes(AbstractRepository.java:523) ~[nexus-proxy-2.0.1.jar:n=
a]
> > =A0 =A0 =A0 =A0at org.sonatype.nexus.proxy.attributes.upgrade.Attribute=
UpgraderThread.run(AttributeUpgraderThread.java:117) ~[nexus-proxy-2.0.1.ja=
r:na]
> > Caused by: java.lang.IllegalArgumentException: Prefix string too short
> > =A0 =A0 =A0 =A0at java.io.File.createTempFile(File.java:1860) ~[na:1.7.=
0_03]
> > =A0 =A0 =A0 =A0at org.sonatype.nexus.proxy.storage.local.fs.DefaultFSPe=
er.getHiddenTarget(DefaultFSPeer.java:321) ~[nexus-proxy-2.0.1.jar:na]
> > =A0 =A0 =A0 =A0at org.sonatype.nexus.proxy.storage.local.fs.DefaultFSPe=
er.storeItem(DefaultFSPeer.java:84) ~[nexus-proxy-2.0.1.jar:na]
> > =A0 =A0 =A0 =A0at org.sonatype.nexus.proxy.storage.local.fs.DefaultFSLo=
calRepositoryStorage.storeItem(DefaultFSLocalRepositoryStorage.java:362) ~[=
nexus-proxy-2.0.1.jar:na]
> > =A0 =A0 =A0 =A0at org.sonatype.nexus.proxy.attributes.DefaultLSAttribut=
eStorage.putAttributes(DefaultLSAttributeStorage.java:182) ~[nexus-proxy-2.=
0.1.jar:na]
> > =A0 =A0 =A0 =A0at org.sonatype.nexus.proxy.attributes.TransitioningAttr=
ibuteStorage.putAttributes(TransitioningAttributeStorage.java:97) ~[nexus-p=
roxy-2.0.1.jar:na]
> > =A0 =A0 =A0 =A0at org.sonatype.nexus.proxy.attributes.DelegatingAttribu=
teStorage.putAttributes(DelegatingAttributeStorage.java:62) ~[nexus-proxy-2=
.0.1.jar:na]
> > =A0 =A0 =A0 =A0at org.sonatype.nexus.proxy.attributes.DefaultAttributes=
Handler.storeAttributes(DefaultAttributesHandler.java:266) ~[nexus-proxy-2.=
0.1.jar:na]
> > =A0 =A0 =A0 =A0at org.sonatype.nexus.proxy.attributes.DefaultAttributes=
Handler.storeAttributes(DefaultAttributesHandler.java:298) ~[nexus-proxy-2.=
0.1.jar:na]
> > =A0 =A0 =A0 =A0at org.sonatype.nexus.proxy.repository.RecreateAttribute=
sWalker.doProcessFileItem(RecreateAttributesWalker.java:102) ~[nexus-proxy-=
2.0.1.jar:na]
> > =A0 =A0 =A0 =A0at org.sonatype.nexus.proxy.repository.RecreateAttribute=
sWalker.processItem(RecreateAttributesWalker.java:78) ~[nexus-proxy-2.0.1.j=
ar:na]
> > =A0 =A0 =A0 =A0at org.sonatype.nexus.proxy.walker.DefaultWalker.process=
Item(DefaultWalker.java:318) ~[nexus-proxy-2.0.1.jar:na]
> > =A0 =A0 =A0 =A0at org.sonatype.nexus.proxy.walker.DefaultWalker.walkRec=
ursive(DefaultWalker.java:227) ~[nexus-proxy-2.0.1.jar:na]
> > =A0 =A0 =A0 =A0at org.sonatype.nexus.proxy.walker.DefaultWalker.walkRec=
ursive(DefaultWalker.java:239) ~[nexus-proxy-2.0.1.jar:na]
> > =A0 =A0 =A0 =A0at org.sonatype.nexus.proxy.walker.DefaultWalker.walkRec=
ursive(DefaultWalker.java:239) ~[nexus-proxy-2.0.1.jar:na]
> > =A0 =A0 =A0 =A0at org.sonatype.nexus.proxy.walker.DefaultWalker.walkRec=
ursive(DefaultWalker.java:239) ~[nexus-proxy-2.0.1.jar:na]
> > =A0 =A0 =A0 =A0at org.sonatype.nexus.proxy.walker.DefaultWalker.walkRec=
ursive(DefaultWalker.java:239) ~[nexus-proxy-2.0.1.jar:na]
> > =A0 =A0 =A0 =A0at org.sonatype.nexus.proxy.walker.DefaultWalker.walkRec=
ursive(DefaultWalker.java:239) ~[nexus-proxy-2.0.1.jar:na]
> > =A0 =A0 =A0 =A0at org.sonatype.nexus.proxy.walker.DefaultWalker.walkRec=
ursive(DefaultWalker.java:239) ~[nexus-proxy-2.0.1.jar:na]
> > =A0 =A0 =A0 =A0at org.sonatype.nexus.proxy.walker.DefaultWalker.walkRec=
ursive(DefaultWalker.java:239) ~[nexus-proxy-2.0.1.jar:na]
> > =A0 =A0 =A0 =A0at org.sonatype.nexus.proxy.walker.DefaultWalker.walkRec=
ursive(DefaultWalker.java:239) ~[nexus-proxy-2.0.1.jar:na]
> > =A0 =A0 =A0 =A0at org.sonatype.nexus.proxy.walker.DefaultWalker.walkRec=
ursive(DefaultWalker.java:239) ~[nexus-proxy-2.0.1.jar:na]
> > =A0 =A0 =A0 =A0at org.sonatype.nexus.proxy.walker.DefaultWalker.walk(De=
faultWalker.java:93) ~[nexus-proxy-2.0.1.jar:na]
> > =A0 =A0 =A0 =A0... 2 common frames omitted
> > 2012-03-10 16:44:39 INFO =A0[ributesUpgrader] - org.sonatype.nexus.prox=
y.attributes.upgrade.AttributeUpgraderThread - Legacy attribute directory u=
pgrade was partially completed.
> > Please see prior log messages for details. Total runtime 0:00:01.492
> >
> >
> >
> >
> > It this a known problem or?
> >
> >
> > Regards,
> >
> > BTJ
> >
> > --
> > -----------------------------------------------------------------------=
------------------------
> > Bj=F8rn T Johansen
> >
> > btj@havleik.no
> > -----------------------------------------------------------------------=
------------------------
> > Someone wrote:
> > "I understand that if you play a Windows CD backwards you hear strange =
Satanic messages"
> > To which someone replied:
> > "It's even worse than that; play it forwards and it installs Windows"
> > -----------------------------------------------------------------------=
------------------------

---------------------------------------------------------------------
To unsubscribe, e-mail: nexus-user-unsubscribe@sonatype.org
For additional commands, e-mail: nexus-user-help@sonatype.org

