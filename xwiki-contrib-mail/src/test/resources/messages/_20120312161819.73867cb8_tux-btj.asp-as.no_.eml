Received: from smtp2.gemalto.com (193.56.114.195) by ABSHUBBWP01.gemalto.com
 (10.3.0.231) with Microsoft SMTP Server id 8.3.192.1; Mon, 12 Mar 2012
 16:18:36 +0100
Received: from mail.sonatype.org (mail.sonatype.org [207.223.241.82])	by
 smtp2.gemalto.com (envelope-from
 nexus-user-return-6773-Jeremie.BOUSQUET=gemalto.com@sonatype.org)
 (8.14.3/8.14.3) with ESMTP id q2CFH0eJ013019	(version=TLSv1/SSLv3
 cipher=DHE-RSA-AES256-SHA bits=256 verify=NOT)	for
 <Jeremie.BOUSQUET@gemalto.com>; Mon, 12 Mar 2012 16:17:02 +0100
Received: (qmail 24423 invoked by uid 89); 12 Mar 2012 15:18:21 -0000
Received: (qmail 24417 invoked by uid 89); 12 Mar 2012 15:18:20 -0000
From: =?iso-8859-1?Q?Bj=F8rn_T_Johansen?= <btj@havleik.no>
To: "nexus-user@sonatype.org" <nexus-user@sonatype.org>
Date: Mon, 12 Mar 2012 16:18:19 +0100
Subject: Re: [nexus-user] Problem upgrading to 2.0.1 from 1.9.x:
 IllegalArgumentException: Prefix string too short
Thread-Topic: [nexus-user] Problem upgrading to 2.0.1 from 1.9.x:
 IllegalArgumentException: Prefix string too short
Thread-Index: Ac0AY2U4q69BGR+wQfePz/9Tr0KSOQ==
Message-ID: <20120312161819.73867cb8@tux-btj.asp-as.no>
References: <20120312112853.698ed584@tux-btj.asp-as.no>
	<CAPLpRQ+raaieA3v5n1E3pPUKY07MsKFTMCqLRMrvD=vSW1vfzA@mail.gmail.com>
	<20120312143551.10a785f2@tux-btj.asp-as.no>	<4F5E0819.80901@hanzelmann.de>
List-Help: <mailto:nexus-user-help@sonatype.org>
List-Subscribe: <mailto:nexus-user-subscribe@sonatype.org>
List-Unsubscribe: <mailto:nexus-user-unsubscribe@sonatype.org>
In-Reply-To: <4F5E0819.80901@hanzelmann.de>
Reply-To: "nexus-user@sonatype.org" <nexus-user@sonatype.org>
Accept-Language: fr-FR, en-US
Content-Language: fr-FR
X-MS-Exchange-Organization-AuthAs: Anonymous
X-MS-Exchange-Organization-AuthSource: ABSHUBBWP01.gemalto.com
X-MS-Has-Attach:
X-Auto-Response-Suppress: All
X-MS-TNEF-Correlator:
x-pm-nine: Xy1rY2FCZXJlaHdvTmduaW9HXC8zaW5pbWVHbW9yRmdub3J0U25PZ25pbW9DLV8K
x-spam-free: -8.838 ()
 BAYES_00,GEM_XTNDSET1,GEM_XTNDSET7,GEM_XTNDSET8,GEM_XTNDSET9,RPL_XTNDSET0,RPL_XTNDSET7,RPL_XTNDSET8,RPL_XTNDSET9,RP_BONK_01,RP_PONK_01,RP_PONK_02,SPF_PASS,X_AUTH_WARN_FAKED
x-scanned-by: MIMEDefang 2.70 on 193.56.114.195
delivered-to: mailing list nexus-user@sonatype.org
x-no-archive: yes
list-post: <mailto:nexus-user@sonatype.org>
received-spf: none (207-223-240-94.contegix.com: domain at havleik.no does
 not designate permitted sender hosts)
mailing-list: contact nexus-user-help@sonatype.org; run by ezmlm
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0

Thx... Found it... Have a file called ld in the repos... But I need that fi=
le there... :-|


BTJ

On Mon, 12 Mar 2012 15:28:41 +0100
Benjamin Hanzelmann <benjamin@hanzelmann.de> wrote:

> For example with GNU find:
>=20
> find sonatype-work \( -name "??" -or -name "?" \) -and -type f
>=20
> Ben
>=20
> On 12.03.2012 14:35, Bj=F8rn T Johansen wrote:
> > Thx.... Not sure how to find this file(s) though... But I will
> > wait to upgrade until this bug is fixed... :)
> >=20
> > BTJ
> >=20
> > On Mon, 12 Mar 2012 13:13:29 +0100 Tam=E1s Cserven=E1k=20
> > <tamas@cservenak.net> wrote:
> >=20
> >> Hi Bj=F8rn,
> >>=20
> >> the exception happens here:=20
> >> https://github.com/sonatype/nexus/blob/982f62b530768e490cf83c916d3aa26=
92d38ede2/nexus/nexus-proxy/src/main/java/org/sonatype/nexus/proxy/storage/=
local/fs/DefaultFSPeer.java#L316
> >>
> >>
> >>
> >>=20
> And while I really consider this a bug (target name is shorter than 3
> >> characters it seems), this raises a question. While truly, this=20
> >> is a bug as code "assumes" the file name will be not shorter
> >> than 3 characters, it seems you do have some file in repository
> >> "3rd party" [id=3Dthirdparty] that has name less then 3
> >> characters. According to repository maven layout, this could
> >> never happen (either maven-metadata.xml or the artifact, but it
> >> is "G-A.ext", so the dash and dot and at least one char should be
> >> present for sure).
> >>=20
> >> Please find this file and simply delete it (if it is a wasteful=20
> >> one, at least it's sure it is not a maven artifact!). If you did=20
> >> find it but you cannot delete it, then this bug below is a=20
> >> blocker for you.
> >>=20
> >> I recorded an issue here=20
> >> https://issues.sonatype.org/browse/NEXUS-4955
> >>=20
> >>=20
> >> Thanks, ~t~
> >>=20
> >> 2012/3/12 Bj=F8rn T Johansen <btj@havleik.no>:
> >>> When I tried to uupgrade to Nexus 2.0.1 this weekend, I kept=20
> >>> getting the following error..:
> >>>=20
> >>>=20
> >>>=20
> >>> 2012-03-10 16:44:38 INFO  [ributesUpgrader] -=20
> >>> org.sonatype.nexus.proxy.attributes.upgrade.AttributeUpgraderThread
> >>>
> >>>=20
> - Upgrading legacy attributes of repository "3rd party"
> >>> [id=3Dthirdparty]. 2012-03-10 16:44:38 INFO  [ributesUpgrader] -=20
> >>> org.sonatype.nexus.proxy.maven.maven2.M2Repository -
> >>> Rebuilding item attributes in repository "3rd party"
> >>> [id=3Dthirdparty] from path=3D"/" 2012-03-10 16:44:39 INFO
> >>> [ributesUpgrader] -=20
> >>> org.sonatype.nexus.proxy.walker.DefaultWalker - Aborted
> >>> walking on repository "3rd party" [id=3Dthirdparty] from path
> >>> "/", cause: Prefix string too short 2012-03-10 16:44:39 ERROR=20
> >>> [ributesUpgrader] -=20
> >>> org.sonatype.nexus.proxy.attributes.upgrade.AttributeUpgraderThread
> >>>
> >>>=20
> - Problems during legacy attribute upgrade of repository "3rd
> >>> party" [id=3Dthirdparty], skipping it. Please fix the problems=20
> >>> and retry the upgrade.=20
> >>> org.sonatype.nexus.proxy.walker.WalkerException: Aborted=20
> >>> walking on repository ID=3D'thirdparty' from path=3D'/'. at=20
> >>> org.sonatype.nexus.proxy.walker.DefaultWalker.reportWalkEnd(DefaultWa=
lker.java:167)
> >>>
> >>>=20
> ~[nexus-proxy-2.0.1.jar:na] at
> >>> org.sonatype.nexus.proxy.walker.DefaultWalker.walk(DefaultWalker.java=
:126)
> >>>
> >>>=20
> ~[nexus-proxy-2.0.1.jar:na] at
> >>> org.sonatype.nexus.proxy.repository.AbstractRepository.recreateAttrib=
utes(AbstractRepository.java:523)
> >>>
> >>>=20
> ~[nexus-proxy-2.0.1.jar:na] at
> >>> org.sonatype.nexus.proxy.attributes.upgrade.AttributeUpgraderThread.r=
un(AttributeUpgraderThread.java:117)
> >>>
> >>>=20
> ~[nexus-proxy-2.0.1.jar:na] Caused by:
> >>> java.lang.IllegalArgumentException: Prefix string too short at=20
> >>> java.io.File.createTempFile(File.java:1860) ~[na:1.7.0_03] at=20
> >>> org.sonatype.nexus.proxy.storage.local.fs.DefaultFSPeer.getHiddenTarg=
et(DefaultFSPeer.java:321)
> >>>
> >>>=20
> ~[nexus-proxy-2.0.1.jar:na] at
> >>> org.sonatype.nexus.proxy.storage.local.fs.DefaultFSPeer.storeItem(Def=
aultFSPeer.java:84)
> >>>
> >>>=20
> ~[nexus-proxy-2.0.1.jar:na] at
> >>> org.sonatype.nexus.proxy.storage.local.fs.DefaultFSLocalRepositorySto=
rage.storeItem(DefaultFSLocalRepositoryStorage.java:362)
> >>>
> >>>=20
> ~[nexus-proxy-2.0.1.jar:na] at
> >>> org.sonatype.nexus.proxy.attributes.DefaultLSAttributeStorage.putAttr=
ibutes(DefaultLSAttributeStorage.java:182)
> >>>
> >>>=20
> ~[nexus-proxy-2.0.1.jar:na] at
> >>> org.sonatype.nexus.proxy.attributes.TransitioningAttributeStorage.put=
Attributes(TransitioningAttributeStorage.java:97)
> >>>
> >>>=20
> ~[nexus-proxy-2.0.1.jar:na] at
> >>> org.sonatype.nexus.proxy.attributes.DelegatingAttributeStorage.putAtt=
ributes(DelegatingAttributeStorage.java:62)
> >>>
> >>>=20
> ~[nexus-proxy-2.0.1.jar:na] at
> >>> org.sonatype.nexus.proxy.attributes.DefaultAttributesHandler.storeAtt=
ributes(DefaultAttributesHandler.java:266)
> >>>
> >>>=20
> ~[nexus-proxy-2.0.1.jar:na] at
> >>> org.sonatype.nexus.proxy.attributes.DefaultAttributesHandler.storeAtt=
ributes(DefaultAttributesHandler.java:298)
> >>>
> >>>=20
> ~[nexus-proxy-2.0.1.jar:na] at
> >>> org.sonatype.nexus.proxy.repository.RecreateAttributesWalker.doProces=
sFileItem(RecreateAttributesWalker.java:102)
> >>>
> >>>=20
> ~[nexus-proxy-2.0.1.jar:na] at
> >>> org.sonatype.nexus.proxy.repository.RecreateAttributesWalker.processI=
tem(RecreateAttributesWalker.java:78)
> >>>
> >>>=20
> ~[nexus-proxy-2.0.1.jar:na] at
> >>> org.sonatype.nexus.proxy.walker.DefaultWalker.processItem(DefaultWalk=
er.java:318)
> >>>
> >>>=20
> ~[nexus-proxy-2.0.1.jar:na] at
> >>> org.sonatype.nexus.proxy.walker.DefaultWalker.walkRecursive(DefaultWa=
lker.java:227)
> >>>
> >>>=20
> ~[nexus-proxy-2.0.1.jar:na] at
> >>> org.sonatype.nexus.proxy.walker.DefaultWalker.walkRecursive(DefaultWa=
lker.java:239)
> >>>
> >>>=20
> ~[nexus-proxy-2.0.1.jar:na] at
> >>> org.sonatype.nexus.proxy.walker.DefaultWalker.walkRecursive(DefaultWa=
lker.java:239)
> >>>
> >>>=20
> ~[nexus-proxy-2.0.1.jar:na] at
> >>> org.sonatype.nexus.proxy.walker.DefaultWalker.walkRecursive(DefaultWa=
lker.java:239)
> >>>
> >>>=20
> ~[nexus-proxy-2.0.1.jar:na] at
> >>> org.sonatype.nexus.proxy.walker.DefaultWalker.walkRecursive(DefaultWa=
lker.java:239)
> >>>
> >>>=20
> ~[nexus-proxy-2.0.1.jar:na] at
> >>> org.sonatype.nexus.proxy.walker.DefaultWalker.walkRecursive(DefaultWa=
lker.java:239)
> >>>
> >>>=20
> ~[nexus-proxy-2.0.1.jar:na] at
> >>> org.sonatype.nexus.proxy.walker.DefaultWalker.walkRecursive(DefaultWa=
lker.java:239)
> >>>
> >>>=20
> ~[nexus-proxy-2.0.1.jar:na] at
> >>> org.sonatype.nexus.proxy.walker.DefaultWalker.walkRecursive(DefaultWa=
lker.java:239)
> >>>
> >>>=20
> ~[nexus-proxy-2.0.1.jar:na] at
> >>> org.sonatype.nexus.proxy.walker.DefaultWalker.walkRecursive(DefaultWa=
lker.java:239)
> >>>
> >>>=20
> ~[nexus-proxy-2.0.1.jar:na] at
> >>> org.sonatype.nexus.proxy.walker.DefaultWalker.walkRecursive(DefaultWa=
lker.java:239)
> >>>
> >>>=20
> ~[nexus-proxy-2.0.1.jar:na] at
> >>> org.sonatype.nexus.proxy.walker.DefaultWalker.walk(DefaultWalker.java=
:93)
> >>>
> >>>=20
> ~[nexus-proxy-2.0.1.jar:na] ... 2 common frames omitted
> >>> 2012-03-10 16:44:39 INFO  [ributesUpgrader] -=20
> >>> org.sonatype.nexus.proxy.attributes.upgrade.AttributeUpgraderThread
> >>>
> >>>=20
> - Legacy attribute directory upgrade was partially completed.
> >>> Please see prior log messages for details. Total runtime=20
> >>> 0:00:01.492
> >>>=20
> >>>=20
> >>>=20
> >>>=20
> >>> It this a known problem or?
> >>>=20
> >>>=20
> >>> Regards,
> >>>=20
> >>> BTJ
> >>>=20
> >>> --=20
> >>> ---------------------------------------------------------------------=
--------------------------
> >>>
> >>>
> >>>=20
> Bj=F8rn T Johansen
> >>>=20
> >>> btj@havleik.no=20
> >>> ---------------------------------------------------------------------=
--------------------------
> >>>
> >>>
> >>>=20
> Someone wrote:
> >>> "I understand that if you play a Windows CD backwards you hear=20
> >>> strange Satanic messages" To which someone replied: "It's even=20
> >>> worse than that; play it forwards and it installs Windows"=20
> >>> ---------------------------------------------------------------------=
--------------------------
> >
> >>>
> >>>=20

---------------------------------------------------------------------
To unsubscribe, e-mail: nexus-user-unsubscribe@sonatype.org
For additional commands, e-mail: nexus-user-help@sonatype.org

